<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.ipring.mapper.OrderMapper">

    <insert id="createSubCloseOrder">
        INSERT INTO t_trade_order (account_id, exchOrder_id, match_id, order_id, open_time, market_type, symbol_id,
                                   order_type, buy_or_sell, ticket, open_price, real_open_price, take_profit, stop_loss,
                                   profit, profit_as_profit_currency, profit_rate, point, swap, commissions, comment,
                                   pending_price, dynamic_sl_point, dynamci_sl_pirce, deviation, close_price,
                                   real_close_price, close_time, deal_reason, open_type, close_type, order_time_mode,
                                   expiration, ask_bid, price_change_rate, ask_price, bid_price, order_status)
        SELECT account_id, exchOrder_id, match_id, #{orderId}, open_time, market_type, symbol_id, order_type, buy_or_sell, ticket, open_price, real_open_price, take_profit, stop_loss,
               #{profit}, #{profitAsProfitCurrency}, #{profitRate}, point, swap, #{commissions}, CONCAT('from#', #{originId}),
               pending_price, dynamic_sl_point, dynamci_sl_pirce, deviation, #{closePrice}, #{realClosePrice}, #{closeTime}, deal_reason, open_type,
               #{closeType}, order_time_mode, expiration, ask_bid, #{priceChangeRate}, ask_price, bid_price, #{orderStatus}
        FROM t_trade_order
        WHERE id = #{originId}
    </insert>
</mapper>